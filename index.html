<!DOCTYPE html>
<html>
<head>
    <title>Hood Milk Game</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.4/gsap.min.js"></script>
</head>
<body>

    <script>
        var SceneA = new Phaser.Class({
        Extends: Phaser.Scene,
        initialize:
            function SceneA (){
                Phaser.Scene.call(this, { key: 'sceneA' });
            },
            init: function (){
                // game variables
                this.score = 0;
                this.time = 20;
                this.speed= 1.5;
                this.heroe = ''
                this.heroe_move = 1;
                this.score_text;
                this.time_text;
            },
            preload: function (){
                this.load.image('bgTitle', 'img/bg0.jpg');
                this.load.image('heroRed', 'img/dipRed.png');
                this.load.image('heroYellow', 'img/dipYellow.png');
                this.load.image('heroViolet', 'img/dipViolet.png');
                this.load.image('instr1', 'img/instr1.png');
                this.load.image('instr2', 'img/instr2.png');
                this.load.image('instr3', 'img/instr3.png');
                this.load.image('logo', 'img/logo.png');
                this.load.image('timerScorer', 'img/timer-scorer.png');
            },

            create: function (){
                var bg0 = this.add.sprite(0, -50, 'bgTitle').setScale(.93);
                bg0.setOrigin(0, 0);
                var heroRed = this.add.sprite(530,650,'heroRed').setScale(.85).setInteractive().setOrigin(0,0);
                var heroYellow = this.add.sprite(70,700,'heroYellow').setScale(.85).setInteractive().setOrigin(0,0);
                var heroViolet = this.add.sprite(1065,700,'heroViolet').setScale(.85).setInteractive().setOrigin(0,0);
                var instr1 = this.add.sprite(170,70,'instr1').setScale(.9).setOrigin(0,0);
                var instr2 = this.add.sprite(170,70,'instr2').setScale(.9).setOrigin(0,0);
                var instr3 = this.add.sprite(170,70,'instr3').setScale(.9).setOrigin(0,0);
                var logo = this.add.sprite(1600,890,'logo').setScale(.9).setOrigin(0,0);
                var timerScorer = this.add.sprite(1500,60,'timerScorer').setScale(.9).setOrigin(0,0);

                this.scoreText = this.add.text(1640, 510, this.score, { fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});
                this.timeText = this.add.text(1535, 190, '0:' + this.time, {fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});

                // startButton = scene.add.text(this.sys.game.config.width, this.sys.game.config.height, 'Start game', textStyle)
                // .setOrigin(0.5)
                // .setPadding(10)
                // .setStyle({ backgroundColor: '#111' })
                // .setInteractive({ useHandCursor: true })
                // .on('pointerdown', startGame)
                // .on('pointerover', () => startButton.setStyle({ fill: '#f39c12' }))
                // .on('pointerout', () => startButton.setStyle({ fill: '#FFF' }))

                // heroes = [heroRed, heroViolet, heroYellow]
                // console.log(heroes[0]) // sprite with el

               
                    heroRed.on('pointerdown', function (pointer) {
                        
                        this.heroe = 'heroRed'
                        console.log(this.heroe)
                        //console.log(hero.texture.key)
                        this.setTint(0xff0000);
                        game.scene.start('sceneB', { heroe: this.heroe, score: this.score, time: this.time });
                    });
                    heroYellow.on('pointerdown', function (pointer) {
                        
                        this.heroe = 'heroYellow'
                        console.log(this.heroe)
                        //console.log(hero.texture.key)
                        this.setTint(0xff0000);
                        game.scene.start('sceneB', { heroe: this.heroe, score: this.score, time: this.time });
                    });

                    heroViolet.on('pointerdown', function (pointer) {
                        this.heroe = 'heroViolet'
                        console.log(this.heroe)
                        //console.log(hero.texture.key)
                        this.setTint(0xff0000);
                        game.scene.start('sceneB', { heroe: this.heroe, score: this.score, time: this.time });
                    });

                    
                    // hero.on('pointerout', function (pointer) {
                    //     this.clearTint();
                    // });

                    // hero.on('pointerup', function (pointer) {
                    //     this.heroe = ''
                    //     this.clearTint();
                    //     console.log(this.heroe)
                    // });
               
                // var text = this.add.text(this.sys.game.config.width/2, this.sys.game.config.height/2, 'Welcome To My Game!', { fontSize: '32px', fill: '#000' }).setOrigin(0.5);
                // text.setInteractive({ useHandCursor: true });
                // this.text.once('pointerdown', function (event) {
                //    this.scene.start('sceneB');
                // }, this);

                // this.input.once('pointerdown', function (event) {
                //     this.scene.start('sceneB', { heroe: this.heroe, score: this.score, time: this.time });
                // }, this);
            },
            update: function (){
                
            },
        });




        var SceneB = new Phaser.Class({
        Extends: Phaser.Scene,
        initialize:
        function SceneB (){
            Phaser.Scene.call(this, { key: 'sceneB' });
        },
        init: function (data){
            // game variables
            this.score = data.score;
            this.time = data.time;
            this.speed = 1.5;
            this.heroe = data.heroe
            this.heroe_move = 1;
            this.score_text;
            this.time_text;
        },
        preload: function ()
        {
            this.load.image('bgGame', 'img/bg1.jpg');
            this.load.image('motionPath', 'img/motionPath.png');
            this.load.image('heroRed', 'img/dipRed.png');
            this.load.image('heroYellow', 'img/dipYellow.png');
            this.load.image('heroViolet', 'img/dipViolet.png');
            this.load.image('logo', 'img/logo.png');
            this.load.image('timerScorer', 'img/timer-scorer.png');
        },
        create: function ()
        {
            var bg1 = this.add.sprite(-70, -80, 'bgGame').setOrigin(0, 0);
            var motionPath = this.add.sprite(130,870,'motionPath').setScale(.9).setOrigin(0,0);
            var hero = this.add.sprite(495,680, `${this.heroe}`).setScale(.9).setOrigin(0,0);
            if (this.heroe !== 'heroRed') {
                hero.setScale(1.1)
            }
            var logo = this.add.sprite(1600,890,'logo').setScale(.9).setOrigin(0,0);
            var timerScorer = this.add.sprite(1500,60,'timerScorer').setScale(.9).setOrigin(0,0);

            this.scoreText = this.add.text(1640, 510, this.score, { fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});
            this.timeText = this.add.text(1535, 190, '0:' + this.time, {fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});
            console.log(this.time)
            
            // this.matter.world.setBounds(0, 0, 800, 600, 32, true, true, false, true);
            // for (var i = 0; i < 64; i++)
            // {
            //     var ball = this.matter.add.image(Phaser.Math.Between(100, 700), Phaser.Math.Between(-600, 0), 'ball2');
            //     ball.setCircle();
            //     ball.setFriction(0.005);
            //     ball.setBounce(1);
            // }

            console.log(this.heroe)
            this.input.once('pointerdown', function (event) {
                this.scene.start('sceneC', { heroe: this.heroe, score: this.score, time: this.time });
            }, this);
        }, 
        update: function ()
        {
            //this.timeText = '0:' + `${this.time+1}`;
            //console.log(this.timeText)
        },
        });
        

        var SceneC = new Phaser.Class({
        Extends: Phaser.Scene,
        initialize:
            function SceneC (){
                Phaser.Scene.call(this, { key: 'sceneC' });
            },
            init: function (data){
                // game variables
                this.score = data.score;
                this.time = data.time;
                this.speed= 1.5;
                this.heroe = data.heroe
                this.heroe_move = 1;
                this.score_text;
                this.time_text;
            },
            preload: function (){
                this.load.image('bgGame', 'img/bg1.jpg');
                this.load.image('motionPath', 'img/motionPath.png');
                this.load.image('heroRed', 'img/dipRed.png');
                this.load.image('logo', 'img/logo.png');
                this.load.image('timerScorer', 'img/timer-scorer.png');
                this.load.image('overlay', 'img/overlay.png');
                this.load.image('final', 'img/final.png')
                this.load.image('btnKeep', 'img/btnKeep.png')
                this.load.image('btnCta', 'img/btnCta.png')
            },
            create: function (){
                var bg1 = this.add.sprite(-70, -80, 'bgGame').setOrigin(0, 0);
                var motionPath = this.add.sprite(130,870,'motionPath').setScale(.9).setOrigin(0,0);
                var hero = this.add.sprite(495,680,'heroRed').setScale(.9).setOrigin(0,0);
                var logo = this.add.sprite(1600,890,'logo').setScale(.9).setOrigin(0,0);
                var timerScorer = this.add.sprite(1500,60,'timerScorer').setScale(.9).setOrigin(0,0);

                this.scoreText = this.add.text(1640, 510, this.score, { fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});
                this.timeText = this.add.text(1535, 190, '0:' + this.time, {fontSize: '120px', fill: 'red', fontFamily: 'Lucida Console, Courier, monospace'});

                var overlay = this.add.sprite(-70, -80, 'overlay').setOrigin(0, 0);
                var final = this.add.sprite(this.sys.game.config.width/2, this.sys.game.config.height/2, 'final').setScale(.85).setOrigin(.5, .5);
                var btnKeep = this.add.sprite((this.sys.game.config.width/2-220), (this.sys.game.config.height/2+270), 'btnKeep').setScale(.85).setOrigin(.5, .5);
                var btnCta = this.add.sprite((this.sys.game.config.width/2+220), (this.sys.game.config.height/2+270), 'btnCta').setScale(.85).setOrigin(.5, .5);

                this.input.once('pointerdown', function (event) {
                this.scene.start('sceneA');
            }, this);
            }
        });

        var config = {
            type: Phaser.AUTO,
            width: 1920,
            height: 1080,
            backgroundColor: '#000',
            parent: 'phaser-example',
            scene: [  SceneA, SceneB, SceneC ],
            physics: { default: 'matter'},
        };

        var game = new Phaser.Game(config);
    </script>

</body>
</html>